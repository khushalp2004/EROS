<!DOCTYPE html>
<html>
<head>
    <title>Test Frontend-Backend Connection</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>üîç Frontend-Backend Connection Test</h1>
    <div id="results"></div>
    
    <script>
        async function testConnection() {
            console.log('üîç Testing Frontend to Backend Connection...');
            const resultsDiv = document.getElementById('results');
            
            try {
                // Test units endpoint with same config as frontend
                console.log('üì° Testing /api/units endpoint...');
                const unitsResponse = await axios.get('http://127.0.0.1:5001/api/units', {
                    timeout: 10000,
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                console.log('‚úÖ Units API Response Status:', unitsResponse.status);
                console.log('‚úÖ Units API Response Data:', unitsResponse.data);
                console.log('‚úÖ Units Count:', unitsResponse.data?.length || 0);
                
                let html = '<h2>‚úÖ Connection Successful!</h2>';
                html += `<p><strong>Status:</strong> ${unitsResponse.status}</p>`;
                html += `<p><strong>Total Units:</strong> ${unitsResponse.data?.length || 0}</p>`;
                
                if (unitsResponse.data && unitsResponse.data.length > 0) {
                    html += '<h3>üìä Unit Details:</h3><ul>';
                    unitsResponse.data.forEach((unit, index) => {
                        html += `<li>${index + 1}. ${unit.service_type} - ${unit.status} - ${unit.unit_vehicle_number}</li>`;
                        console.log(`  ${index + 1}. ${unit.service_type} - ${unit.status} - ${unit.unit_vehicle_number}`);
                    });
                    html += '</ul>';
                    
                    const availableUnits = unitsResponse.data.filter(u => u.status === 'AVAILABLE');
                    html += `<p><strong>‚úÖ Available Units: ${availableUnits.length}</strong></p>`;
                    console.log(`‚úÖ Available Units: ${availableUnits.length}`);
                }
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                console.error('‚ùå Connection Failed:', error.message);
                let html = '<h2>‚ùå Connection Failed!</h2>';
                html += `<p><strong>Error:</strong> ${error.message}</p>`;
                if (error.response) {
                    html += `<p><strong>Response Status:</strong> ${error.response.status}</p>`;
                    html += `<p><strong>Response Data:</strong> ${JSON.stringify(error.response.data)}</p>`;
                }
                resultsDiv.innerHTML = html;
            }
        }
        
        // Run test when page loads
        testConnection();
    </script>
</body>
</html>
